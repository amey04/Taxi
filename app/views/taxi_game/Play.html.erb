<html>
    <head>
        <title>Play</title>
    </head>
    <body>
    	<div align="center">
    		<h1> Taxi Game </h1>	
    	</div>
    	
        <div class="wrapper" align="center" style="padding-top: 10px">
            <canvas align="center" id="game" width="400" height="10" tabindex="1"></canvas>

            	<style type="text/css">
					.tg  {border-collapse:collapse;border-spacing:0;}
					.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
					.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
					.tg .tg-s6z2{text-align:center}
				</style>
				<table class="tg" id="summary">
  				<tr>
    				<th class="tg-s6z2">Object</th>
    				<th class="tg-s6z2">Position</th>
    				<th class="tg-s6z2" colspan="2">Features</th>
  				</tr>
  				<tr>
    				<td class="tg-031e">T1</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e">is_touching_north<br>is_touching_east<br>is_touching_west<br>is_touching_south</td>
    				<td class="tg-031e">f<br>false<br>false<br>false</td>
  				</tr>
  				<tr>
    				<td class="tg-031e">P1</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e">in_taxi</td>
    				<td class="tg-031e">false</td>
  				</tr>
  				<tr>
    				<td class="tg-031e">W1</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
  				</tr>
  				<tr>
    				<td class="tg-031e">W2</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
  				</tr>
  				<tr>
    				<td class="tg-031e">W3</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
  				</tr>
  				<tr>
    				<td class="tg-031e">W4</td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
    				<td class="tg-031e"></td>
  				</tr>
				</table>
        </div>
        <script type="text/javascript">

        	/*var actions = new Array("action1", "2", "3", "4", "5", "6");
        	*/
			var taxi_location = {
				x: 1,
				y: 3
			};
			var passanger_location = {
				x: 1,
				y: 2
			};
			
			var is_touching_n=false, is_touching_s=false, is_touching_w=false, is_touching_e=false;
			var is_in_taxi=false;
			
        	var actions = {
        		a1: function() { action1(); },
        		a2: function() { action2(); },
        		a3: function() { action3(); },
        		a4: function() { action4(); },
        		a5: function() { action5(); },
        		a6: function() { action6(); }
        	};
        	var i = 0;
			for (a in actions) {
    			actions[i] = actions[a];
    			++i;
			}
			
        	/*function shuffleActions {
        		var cnt=actions.length, index, tmp;
        		while (cnt > 0) {
        			index = Math.floor(Math.random() * cnt);
        			cnt--;
        			tmp = actions[cnt];
        			actions[cnt] = actions[index];
        			actions[index] = tmp;
        		}
        	}*/
        	function printSummary() {
        		var tab = document.getElementById("summary").rows[1].cells;
        		tab[3].innerHTML=is_touching_n+'<br>'+is_touching_e+'<br>'+is_touching_w+'<br>'+is_touching_s;
        		tab = document.getElementById("summary").rows[2].cells;
        		tab[3].innerHTML=is_in_taxi;
        		
        	}
        	
        	function action1() { //go north
        		if(taxi_location.x > 0) {
        			taxi_location.x -= 1;
        		}
        		if(taxi_location.x == 0) {
        			is_touching_n = true;
        		}
        		else {
        			is_touching_n = false;
        		}
        		is_touching_s = false;
        		
        		alert("Action 1::");
        		printSummary();
        	}
        	
            function action2() { //go south
        		alert("Action 2::");
        		if(taxi_location.x < 4) {
        			taxi_location.x += 1;
        		}
        		if(taxi_location.x == 4) {
        			is_touching_s = true;
        		}
        		else {
        			is_touching_s = false;
        		}
        		is_touching_n = false;
        		printSummary();
        	}
        	function action3() { //go west
        		if(taxi_location.y > 0) {
        			taxi_location.y -= 1;
        		}
        		if(taxi_location.y == 0) {
        			is_touching_w = true;
        		}
        		else {
        			is_touching_w = false;
        		}
        		is_touching_e = false;
        		alert("Action 3::");
        		printSummary();
        	} 
        	function action4() { //go east
        		alert("Action 4::");
        		if(taxi_location.y < 4) {
        			taxi_location.x += 1;
        		}
        		if(taxi_location.y == 0) {
        			is_touching_e = true;
        		}
        		else {
        			is_touching_e = false;
        		}
        		is_touching_w = false;
        		printSummary();
        	} 
        	
        	function action5() { // pickup
        		alert("Action 5::");
        		if(taxi_location.x == passanger_location.x && taxi_location.y == pasenger_location.y) {
        			
        		}
        	} 
        	function action6() { //drop off
        		alert("Action 6::");
        	} 
        	
        	function shuffle() {
				/*var counter = array.length, temp, index;    
				while (counter > 0) {
		        	index = Math.floor(Math.random() * counter);
					counter--;
        			temp = array[counter];
        			array[counter] = array[index];
        			array[index] = temp;
   			 	}
				return array;*/
				var actiona1 = {};
				var check = [0, 0, 0, 0, 0, 0, 0];
				var counter=6;
				var index, max=0, k=0;
				for(a in actions) {
					index = Math.floor(Math.random() * counter+1 );
					while(check[index-1] != 0 && max < 6) {
						index = Math.floor(Math.random() * counter+1);
					}
					if(max == 6)
						return;
					check[index-1] = 1;
					actions1[k++] = actions[index-1];
					max++;
				}
				var i=0;
				while(i < 6) {
					actions[i] = actions1[i++];
				}
			}
			
        var el = document.getElementById("game");
		el.onkeydown = function(evt) {
                evt = evt || window.event;
                if(evt.keyCode == 49) { //1
                	actions[0]();
                }
                else if(evt.keyCode == 50) { //2
                	actions[1]();
                }
                else if(evt.keyCode == 51) { //3
                	actions[2]();
                }
                else if(evt.keyCode == 52) { //4
                	actions[3]();
                }
                else if(evt.keyCode == 53) { //5
                	actions[4]();
                }
                else if(evt.keyCode == 54) { //6
                	actions[5]();
                }
                else {
                	alert("Invalid key");
                	shuffle();
                }
            };

            /*el.onkeyup = function(evt) {
                evt = evt || window.event;
                alert("keyup: " + evt.keyCode);
            };*/
        </script>
    </body>
</html>